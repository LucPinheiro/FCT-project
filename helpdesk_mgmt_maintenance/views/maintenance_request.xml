<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Maintenance Requests tree view -->
    <record id="help_main_maintenance_request_tree" model="ir.ui.view">
        <field name="name">maintenance.request.tree (Helpdesk_mgmt Maintenance)</field>
        <field name="model">maintenance.request</field>
        <field name="inherit_id" ref="maintenance.hr_equipment_request_view_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='company_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='stage_id']" position="after">
                <field name="maintenance_type" />
            </xpath>
            <xpath expr="//field[@name='maintenance_type']" position="after">
                <field name="equipment_ids_count" string= 'NÂº Equipment'/>
            </xpath>
        </field>
    </record>


     <!-- Maintenance Requests form view -->
    <record id="help_main_maintenance_request_form" model="ir.ui.view">
        <field name="name">maintenance.request.form (Helpdesk_mgmt Maintenance)</field>
        <field name="model">maintenance.request</field>
        <field name="inherit_id" ref="maintenance.hr_equipment_request_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='reset_equipment_request']" position="after">
                <button name="action_send_email" string="Send by Email" type="object"  data-hotkey="g"/>
                <!-- <button name="action_quotation_send" string="Send by Email" type="object" states="sent,sale" data-hotkey="g"/>  -->
            </xpath>
    
            <xpath expr="//div[hasclass('oe_right')]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//div[hasclass('oe_title')]" position="before">
                  <div class="oe_right">
                        <field name="kanban_state" class="oe_inline" widget="state_selection"/>
                    </div>
            </xpath>
                  
            <xpath expr="//div[hasclass('oe_right')]" position="after">
                <div class="oe_button_box" name="button_box">

                    <button class="oe_stat_button" name="%(action_report_request_traceabilitty)d"
                        type="action" icon="fa-arrow-up"
                        attrs="{'invisible': [('tracking', '=', False)]}">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="tracking" invisible="1" />
                                </span>
                                <span class="o_stat_text">Traceability</span>
                            </div>
                    </button>  
                </div> 

            </xpath>
            
            <!-- Hide equipment_id field view form -->
            <xpath expr="//field[@name='company_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <!-- Hide equipment_id field view form -->
            <xpath expr="//field[@name='equipment_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> 

            <!-- Hide company field view form -->
            <!-- <xpath expr="//field[@name='company_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->

            <!-- Hide description field view form -->
            <xpath expr="//field[@name='description']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            
            <xpath expr="//sheet['.']" position="inside">
                <notebook>
                    <page string="Description" >
                        <group name="name" string="Nota">
                            <field name='description' placeholder="Internal Notes"/>
                        </group>
                    </page>

                    <page string="Equipments">
                        <group name="name" string="Line">
                            <field name="equipment_ids" nolabel="1"/>  
                        </group>
                    </page>

                    <page string="Traceability">
                        <group name="tracking" string="Traceability">
                            <group>
                            <field name="tracking" widget="radio"/>
                            </group>
                           <group>
                                <field name="maintenance_team_id" />
                                <field name="employee_id" string='Technician'/>
                                <field name="request_date" />
                                <field name="maintenance_type" />
                                <field name="email_cc" />
                            </group>
                        </group>
                    </page>
                    </notebook>

            </xpath>

        </field>
    </record>

    <!-- Maintenance Requests Kanban view -->
    <!-- <record id="help_main_maintenance_request_kanban" model="ir.ui.view">
        <field name="name">maintenance.request.kanban (Helpdesk_mgmt Maintenance)</field>
        <field name="model">maintenance.request</field>
        <field name="inherit_id" ref="maintenance.hr_equipment_request_view_kanban"/>
        <field name="arch" type="xml">
            
        </field>
    </record> -->


    <!-- Maintenance Requests Search view -->
    <!-- <record id="help_main_maintenance_request_search" model="ir.ui.view">
        <field name="name">maintenance.request.search (Helpdesk_mgmt Maintenance)</field>
        <field name="model">maintenance.request</field>
        <field name="inherit_id" ref="maintenance.hr_equipment_request_view_search"/>
        <field name="arch" type="xml">
            
        </field>
    </record>   -->
                       
</odoo>
